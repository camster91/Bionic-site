<%- include('../partials/header') %>

<!-- Order Header -->
<section class="dashboard-header">
    <div class="container">
        <div class="dashboard-welcome">
            <h1>Submit Purchase Order</h1>
            <p><%= client ? client.company : '' %></p>
        </div>
        <a href="/portal" class="btn btn-secondary btn-small">Back to Dashboard</a>
    </div>
</section>

<!-- Order Form -->
<section class="order-section">
    <div class="container">
        <% if (orderSubmitted) { %>
        <!-- Order Success -->
        <div class="order-success">
            <div class="success-icon">&#10003;</div>
            <h2>Purchase Order Submitted!</h2>
            <p>Your order has been received and is being processed.</p>
            <div class="order-details">
                <p><strong>Order Reference:</strong> <%= orderNumber %></p>
                <p><strong>Submitted:</strong> <%= new Date().toLocaleDateString() %></p>
            </div>
            <p>You will receive a confirmation email shortly. Our team will review your order and contact you within 1-2 business days to confirm details and provide a production timeline.</p>
            <div class="success-actions">
                <a href="/portal" class="btn btn-primary">Return to Dashboard</a>
                <a href="/portal/order" class="btn btn-secondary">Submit Another Order</a>
            </div>
        </div>
        <% } else { %>
        <!-- Multi-Step Order Form -->
        <div class="order-form-container">
            <form class="order-form" action="/portal/order" method="POST">
                <!-- Step 1: Company Information -->
                <div class="form-section">
                    <h2>1. Company Information</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="companyName">Company Name *</label>
                            <input type="text" id="companyName" name="companyName" value="<%= client ? client.company : '' %>" required>
                        </div>
                        <div class="form-group">
                            <label for="contactName">Contact Name *</label>
                            <input type="text" id="contactName" name="contactName" required placeholder="Primary contact for this order">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="contactEmail">Contact Email *</label>
                            <input type="email" id="contactEmail" name="contactEmail" required placeholder="email@company.com">
                        </div>
                        <div class="form-group">
                            <label for="contactPhone">Contact Phone *</label>
                            <input type="tel" id="contactPhone" name="contactPhone" required placeholder="(555) 123-4567">
                        </div>
                    </div>
                </div>

                <!-- Step 2: Product Details -->
                <div class="form-section">
                    <h2>2. Product Details</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="productType">Product Type *</label>
                            <select id="productType" name="productType" required>
                                <option value="">Select product type</option>
                                <option value="capsules">Capsules</option>
                                <option value="powder">Powder</option>
                                <option value="liquid">Liquid</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="productName">Product Name / SKU *</label>
                            <input type="text" id="productName" name="productName" required placeholder="Your product name or identifier">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="formulation">Formulation Details *</label>
                        <textarea id="formulation" name="formulation" rows="4" required placeholder="Describe your formulation, including ingredients and specifications..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="capsuleSize">Capsule Size (if applicable)</label>
                            <select id="capsuleSize" name="capsuleSize">
                                <option value="">N/A</option>
                                <option value="00">Size 00</option>
                                <option value="0">Size 0</option>
                                <option value="1">Size 1</option>
                                <option value="2">Size 2</option>
                                <option value="3">Size 3</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="capsuleType">Capsule Type (if applicable)</label>
                            <select id="capsuleType" name="capsuleType">
                                <option value="">N/A</option>
                                <option value="gelatin">Gelatin</option>
                                <option value="vegetarian">Vegetarian</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Quantity & Packaging -->
                <div class="form-section">
                    <h2>3. Quantity & Packaging</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="quantity">Total Quantity *</label>
                            <input type="number" id="quantity" name="quantity" required min="1" placeholder="e.g., 10000">
                        </div>
                        <div class="form-group">
                            <label for="unitSize">Units Per Bottle *</label>
                            <input type="number" id="unitSize" name="unitSize" required min="1" placeholder="e.g., 60">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bottleSize">Bottle Size</label>
                            <input type="text" id="bottleSize" name="bottleSize" placeholder="e.g., 150cc, 200cc">
                        </div>
                        <div class="form-group">
                            <label for="labeling">Labeling</label>
                            <select id="labeling" name="labeling">
                                <option value="customer-provided">Customer Will Provide Labels</option>
                                <option value="unlabeled">Ship Unlabeled</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Delivery Information -->
                <div class="form-section">
                    <h2>4. Delivery Information</h2>
                    <div class="form-group">
                        <label for="shippingAddress">Shipping Address *</label>
                        <textarea id="shippingAddress" name="shippingAddress" rows="3" required placeholder="Full shipping address including street, city, state, and ZIP code"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="requestedDate">Requested Delivery Date</label>
                            <input type="date" id="requestedDate" name="requestedDate">
                        </div>
                        <div class="form-group">
                            <label for="shippingMethod">Shipping Method</label>
                            <select id="shippingMethod" name="shippingMethod">
                                <option value="standard">Standard Ground</option>
                                <option value="expedited">Expedited</option>
                                <option value="customer-pickup">Customer Pickup</option>
                                <option value="freight">Freight</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Additional Notes -->
                <div class="form-section">
                    <h2>5. Additional Notes</h2>
                    <div class="form-group">
                        <label for="notes">Special Instructions or Notes</label>
                        <textarea id="notes" name="notes" rows="4" placeholder="Any special requirements, instructions, or notes for this order..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="poNumber">Your PO Number (optional)</label>
                        <input type="text" id="poNumber" name="poNumber" placeholder="Your internal PO reference number">
                    </div>
                </div>

                <!-- Submit -->
                <div class="form-actions">
                    <p class="form-note">By submitting this order, you agree to our standard terms and conditions. Our team will review your order and provide a quote before production begins.</p>
                    <button type="submit" class="btn btn-primary btn-large">Submit Purchase Order</button>
                </div>
            </form>
        </div>
        <% } %>
    </div>
</section>

<%- include('../partials/footer') %>
